/**
 * ParamQuery Grid a.k.a. pqGrid v1.0.3
 * 
 * Copyright (c) 2012 Paramvir Dhindsa (http://paramquery.com)
 * Released under MIT license
 * http://paramquery.com/license
 * 
 */     	
(function(a){a.adapter={xmlToArray:function(d,e){var c=e.itemParent;var g=e.itemNames;var b=[];var f=a(d).find(c);f.each(function(k,l){var j=a(l);var h=[];a(g).each(function(i,m){h.push(j.find(m).text())});b.push(h)});return b},tableToArray:function(h){var i=a(h);var c=[];var f=[];var g=[];var e=[];var b=i.find("tr:first");var d=i.find("tr:eq(1)");b.find("th,td").each(function(p,m){var j=a(m);var r=j.html();var k=j.width();var s="string";var n=d.find("td:eq("+p+")");var l=n.text();var q=n.attr("align");l=l.replace(/,/g,"");if(parseInt(l)==l&&(parseInt(l)+"").length==l.length){s="integer"}else{if(parseFloat(l)==l){s="float"}}var o={title:r,width:k,dataType:s,align:q};c.push(o)});i.find("tr").each(function(k,m){if(k==0){return}var l=a(m);var j=[];l.find("td").each(function(n,o){j.push(a.trim(a(o).html()))});f.push(j)});return{data:f,colModel:c}}}})(jQuery);(function(b){var a={};a.options={currentPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20,change:null};a._create=function(){var c=this;this.element.addClass("pq-pager").css({});this.first=b("<button type='button' title='First Page'></button>",{}).appendTo(this.element).button({icons:{primary:"pq-page-first"},text:false}).bind("click.paramquery",function(d){if(c.options.currentPage>1){if(c._trigger("change",d,{curPage:1})!==false){c.option({currentPage:1})}}});this.prev=b("<button type='button' title='Previous Page'></button>").appendTo(this.element).button({icons:{primary:"pq-page-prev"},text:false}).bind("click",function(d){if(c.options.currentPage>1){var e=c.options.currentPage-1;if(c._trigger("change",d,{curPage:e})!==false){c.option({currentPage:e})}}});b("<span class='pq-separator'></span>").appendTo(this.element);b("<span>Page </span>",{}).appendTo(this.element);this.page=b("<input type='text' tabindex='0' />").appendTo(this.element).bind("change",function(d){var e=b(this);var f=e.val();if(isNaN(f)||f<1){e.val(c.options.currentPage);return false}f=parseInt(f);if(f>c.options.totalPages){e.val(c.options.currentPage);return false}if(c._trigger("change",d,{curPage:f})!==false){c.option({currentPage:f})}else{e.val(c.options.currentPage);return false}});b("<span>of </span>",{}).appendTo(this.element);this.$total=b("<span class='total'></span>",{}).appendTo(this.element);b("<span class='pq-separator'></span>").appendTo(this.element);this.next=b("<button type='button' title='Next Page'></button>").appendTo(this.element).button({icons:{primary:"pq-page-next"},text:false}).bind("click",function(d){var e=c.options.currentPage+1;if(c._trigger("change",d,{curPage:e})!==false){c.option({currentPage:e})}});this.last=b("<button type='button' title='Last Page'></button>").appendTo(this.element).button({icons:{primary:"pq-page-last"},text:false}).bind("click",function(d){var e=c.options.totalPages;if(c._trigger("change",d,{curPage:e})!==false){c.option({currentPage:e})}});b("<span class='pq-separator'></span>").appendTo(this.element);b("<span>Records per page: </span>").appendTo(this.element);this.$rPP=b("<select></select>").appendTo(this.element).change(function(d){var e=b(this).val();if(c._trigger("change",d,{rPP:e})!==false){c.options.rPP=e}});b("<span class='pq-separator'></span>").appendTo(this.element);this.$refresh=b("<button type='button' title='Refresh'></button>").appendTo(this.element).button({icons:{primary:"pq-refresh"},text:false}).bind("click",function(d){if(c._trigger("refresh",d)!==false){}});b("<span class='pq-separator'></span>").appendTo(this.element);this.$msg=b("<span class='pq-pager-msg'></span>").appendTo(this.element);this._refresh()};a._refresh=function(){var e=(this.$rPP);e.empty();var c=this.options.rPPOptions;for(var f=0;f<c.length;f++){var d=document.createElement("option");d.text=c[f];d.value=c[f];d.setAttribute("value",c[f]);d.innerHTML=c[f];e.append(d)}e.find("option[value="+this.options.rPP+"]").attr("selected",true);if(this.options.currentPage>=this.options.totalPages){this.next.button({disabled:true});this.last.button({disabled:true})}else{this.next.button({disabled:false});this.last.button({disabled:false})}if(this.options.currentPage<=1){this.first.button({disabled:true});this.prev.button({disabled:true})}else{this.first.button({disabled:false});this.prev.button({disabled:false})}this.page.val(this.options.currentPage);this.$total.text(this.options.totalPages);if(this.options.totalRecords>0){var g=this.options.rPP;var h=this.options.currentPage;var j=this.options.totalRecords;var l=(h-1)*g;var k=h*g;if(k>j){k=j}this.$msg.html("Displaying "+(l+1)+" to "+(k)+" of "+j+" items.")}else{this.$msg.html("")}};a._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection();_super()};a._setOption=function(c,d){if(c=="currentPage"||c=="totalPages"){d=parseInt(d)}b.Widget.prototype._setOption.call(this,c,d)};a._setOptions=function(){b.Widget.prototype._setOptions.apply(this,arguments);this._refresh()};b.widget("paramquery.pqPager",a)})(jQuery);(function(b){var a={};a.options={length:200,num_eles:3,cur_pos:0,timeout:350,pace:"optimum",direction:"vertical"};a._destroy=function(){this.element.removeClass("pq-scrollbar-vert").enableSelection().removeClass("pq-scrollbar-horiz").unbind("click.pq-scrollbar").empty();this.element.removeData()};a._create=function(){this.length=this.options.length;this.direction=this.options.direction;this.num_eles=this.options.num_eles;var e=this;var f=this.element.empty();if(this.direction=="vertical"){f.addClass("pq-scrollbar-vert");f.html("<div class='top-btn pq-sb-btn'></div>			<div class='pq-sb-slider'>				<div class='vert-slider-top'></div>				<div class='vert-slider-bg'></div>				<div class='vert-slider-center'></div>				<div class='vert-slider-bg'></div>				<div class='vert-slider-bottom'></div>			</div>		<div class='bottom-btn pq-sb-btn'></div>")}else{f.addClass("pq-scrollbar-horiz");f.width(this.width);f.html("<div class='left-btn pq-sb-btn'></div>			<div class='pq-sb-slider pq-sb-slider-h'>				<span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span>			</div>		<div class='right-btn pq-sb-btn'></div>")}this.element.disableSelection().bind("click.pq-scrollbar",function(i){if(e.options.disabled){return}if(e.$slider.is(":hidden")){return}if(e.direction=="vertical"){var n=i.pageY;var l=e.element.offset().top;var k=l+e.length;var h=e.$slider.offset().top;var j=h+e.$slider.height();if(n<h&&n>l+17){var o=n-l;e.$slider.css("top",o);e._updateCurPosAndTrigger(i)}else{if(n>j&&n<k-17){e.$slider.css("top",n-l-e.$slider.height());e._updateCurPosAndTrigger(i)}}}else{var m=i.pageX;var h=e.$slider.offset().left;var j=h+e.$slider.width();if(m<h){e.$slider.css("left",m-e.element.offset().left);e._updateCurPosAndTrigger(i)}else{if(m>j){e.$slider.css("left",m-e.element.offset().left-e.$slider.width());e._updateCurPosAndTrigger(i)}}}});var d="x";if(this.direction=="vertical"){d="y"}this.$slider=b("div.pq-sb-slider",this.element).draggable({axis:d,helper:function(h,i){e._setDragLimits();return this},drag:function(h){var i=e.options.pace;if(i=="optimum"){e._setNormalPace(h)}else{if(i=="fast"){e._updateCurPosAndTrigger(h)}}},stop:function(h){e._updateCurPosAndTrigger(h)}});function c(h){if(e.options.cur_pos>0){e.options.cur_pos--;e.updateSliderPos();e._trigger("scroll",h,{cur_pos:e.options.cur_pos})}}this.$top_btn=b("div.top-btn,div.left-btn",this.element).click(function(h){if(e.options.disabled){return}c(h);h.preventDefault();return false}).mousedown(function(h){if(e.options.disabled){return}e.mousedownTimeout=window.setTimeout(function(){e.mousedownInterval=window.setInterval(function(){c(h)},50)},e.options.timeout)}).bind("mouseup mouseout",function(h){if(e.options.disabled){return}e._mouseup(h)});function g(h){if(e.options.cur_pos<e.num_eles-1){e.options.cur_pos++;e.updateSliderPos();e._trigger("scroll",h,{cur_pos:e.options.cur_pos})}}this.$bottom_btn=b("div.bottom-btn,div.right-btn",this.element).click(function(h){if(e.options.disabled){return}g(h);h.preventDefault();return false}).mousedown(function(h){if(e.options.disabled){return}e.mousedownTimeout=window.setTimeout(function(){e.mousedownInterval=window.setInterval(function(){g(h)},50)},e.options.timeout)}).bind("mouseup mouseout",function(h){if(e.options.disabled){return}e._mouseup(h)});this._refresh()};a._mouseup=function(c){if(this.options.disabled){return}var d=this;window.clearTimeout(d.mousedownTimeout);d.mousedownTimeout=null;window.clearInterval(d.mousedownInterval);d.mousedownInterval=null};a._setDragLimits=function(){if(this.direction=="vertical"){var c=this.element.offset().top+17;var d=(c+this.length-34-this.slider_length);this.$slider.draggable("option","containment",[0,c,0,d])}else{var c=this.element.offset().left+17;var d=(c+this.length-34-this.slider_length);this.$slider.draggable("option","containment",[c,0,d,0])}};a._refresh=function(){if(this.options.num_eles<=1){this.element.css("display","none")}else{this.element.css("display","")}this.num_eles=this.options.num_eles;this.length=this.options.length;this._validateCurPos();this.$slider.css("display","");if(this.direction=="vertical"){this.element.height(this.length);this._setSliderBgLength();this.scroll_space=this.length-34-this.slider_length;if(this.scroll_space<4||this.num_eles<=1){this.$slider.css("display","none")}this.updateSliderPos(this.options.cur_pos)}else{this.element.width(this.length);this._setSliderBgLength();this.scroll_space=this.length-34-this.slider_length;if(this.scroll_space<4||this.num_eles<=1){this.$slider.css("display","none")}this.updateSliderPos(this.options.cur_pos)}};a._setSliderBgLength=function(){var e=this.length;var f=this.num_eles*40+e;var d=e-34;var c=d*e/f;var g=Math.round((c-(8+3+3))/2);if(g<1){g=1}this.slider_length=8+3+3+2*g;if(this.direction=="vertical"){b("div.vert-slider-bg",this.element).height(g);this.$slider.height(this.slider_length)}else{b(".horiz-slider-bg",this.element).width(g);this.$slider.width(this.slider_length)}};a._updateCurPosAndTrigger=function(c,g){var e=this;var h=e.$slider;if(g==null){g=(e.direction=="vertical")?parseInt(h[0].style.top):parseInt(h[0].style.left)}var f=e.length-34-((e.direction=="vertical")?h[0].offsetHeight:h[0].offsetWidth);var d=(g-17)*(e.num_eles-1)/f;d=Math.round(d);if(e.options.cur_pos!=d){e.options.cur_pos=d;e._trigger("scroll",c,{cur_pos:e.options.cur_pos})}};a._setNormalPace=function(c){if(this.timer){window.clearInterval(this.timer);this.timer=null}var d=this;d.timer=window.setInterval(function(){var f=d.$slider;var e=(d.direction=="vertical")?parseInt(f[0].style.top):parseInt(f[0].style.left);if(d.prev_top==e){d._updateCurPosAndTrigger(c,e);window.clearInterval(d.timer);d.timer=null}d.prev_top=e},20)};a._validateCurPos=function(){if(this.options.cur_pos>=this.num_eles){this.options.cur_pos=this.num_eles-1}if(this.options.cur_pos<0){this.options.cur_pos=0}};a.updateSliderPos=function(){var c=(this.scroll_space*(this.options.cur_pos))/(this.num_eles-1);if(this.direction=="vertical"){this.$slider.css("top",17+c)}else{this.$slider.css("left",17+c)}};a.scroll=function(){var c=null;this._trigger("scroll",c,{cur_pos:this.options.cur_pos})};a._setOption=function(c,d){if(c=="disabled"){if(d==true){this.$slider.draggable("disable")}else{this.$slider.draggable("enable")}}b.Widget.prototype._setOption.call(this,c,d)};a._setOptions=function(){b.Widget.prototype._setOptions.apply(this,arguments);this._refresh()};b.widget("paramquery.pqScrollBar",a)})(jQuery);(function(b){var a={};a.options={cellSelected:null,colModel:null,columnBorders:true,columnOrder:null,dataModel:{curPage:0,totalPages:0,rPP:10,location:"local",sorting:"local",sortDir:"up",method:"GET",rPPOptions:[10,20,50,100]},draggable:false,editable:true,freezeCols:0,height:400,minWidth:50,numberCell:true,numberCellWidth:50,resizable:false,scrollPace:"fast",sortable:true,title:"&nbsp;",width:600,wrap:true};a._destroyResizable=function(){if(this.element.data("resizable")){this.element.resizable("destroy")}};a._destroyDraggable=function(){if(this.element.data("draggable")){this.element.draggable("destroy")}};a.disable=function(){if(this.$disable==null){this.$disable=b("<div class='pq-grid-disable'></div>").css("opacity",0.2).appendTo(this.element)}};a.enable=function(){if(this.$disable){this.element[0].removeChild(this.$disable[0]);this.$disable=null}};a._destroy=function(){this._destroyResizable();this._destroyDraggable();this.element.empty();this.element.css("height","");this.element.css("width","");this.element.removeClass("pq-grid").removeData()};a._findCellFromEvtCoords=function(n){if(this.$tbl==null){return{$td:null,rowIndx:null,colIndx:null}}var m=n.pageY-this.$cont.offset().top;var f=n.pageX-this.$cont.offset().left;var e=this.$tbl.find("tr");var l=0,h=0,g=0;for(var j=1;j<e.length;j++){if(e[j].offsetTop>m){break}else{l++}}var k=b(e[l]);h=parseInt(k.attr("pq-row-indx"));var c=k.find("td");l=0;for(var j=1;j<c.length;j++){if(c[j].offsetLeft>f){break}else{l++}}var d=b(c[l]);if(d[0].nodeName.toUpperCase()!="TD"){d=b(n.target).parent("td")}g=parseInt(d.attr("pq-col-indx"));return{$td:d,rowIndx:h,colIndx:g}};a._create=function(){this.minWidth=this.options.minWidth;this.cols=[];this.dataModel=this.options.dataModel;this.widths=[];this.outerWidths=[];this.rowHeight=22;this.hidearr=[];this.hidearrHS=[];this.numberCell=this.options.numberCell;this.numberCellWidth=this.options.numberCellWidth;this.freezeCols=this.options.freezeCols?this.options.freezeCols:0;this.columnBorders=this.options.columnBorders?true:false;var f=this;this.$tbl=null;this.colModel=this.options.colModel?this.options.colModel:[];b(this.colModel).each(function(h,g){if(g.width!=undefined){var j=parseInt(g.width);if(j<f.minWidth){j=f.minWidth}f.widths[h]=j}else{f.widths[h]=f.minWidth}});this.element.empty().addClass("pq-grid").append("<div class='pq-grid-top'>		<div class='pq-grid-title'>&nbsp;</div></div>	<div class='pq-grid-inner' tabindex=0><div class='pq-grid-right'> 		<div class='pq-header-outer'> 			<div class='pq-grid-header'></div> 		</div> 		<div class='pq-cont-right' style=''>			<div class='pq-cont' ></div> 		</div> 		</div></div>	<div class='pq-grid-bottom'>	<div class='pq-grid-footer'>&nbsp;</div>	</div>");this._trigger("render",null,{dataModel:this.options.dataModel});this.$top=b("div.pq-grid-top",this.element);this.$title=b("div.pq-grid-title",this.element);this.$toolbar=b("div.pq-grid-toolbar",this.element);this.$grid_inner=b("div.pq-grid-inner",this.element);this.$grid_right=b(".pq-grid-right",this.element);this.$header_o=b("div.pq-header-outer",this.$grid_right);this.$header=b("div.pq-grid-header",this.$grid_right);this.$bottom=b("div.pq-grid-bottom",this.element);this.$footer=b("div.pq-grid-footer",this.element);this.$cont_o=b("div.pq-cont-right",this.$grid_right);this.$cont=b("div.pq-cont",this.$grid_right).click(function(g){if(f._isEditCell(g)){return true}var j=f._findCellFromEvtCoords(g);var k=j.$td,h=j.rowIndx,i=j.colIndx;if(k==null||k.length==0){return}if(f.$td_edit&&(f.$td_edit[0]==k[0])){return true}if(f.$tr_focus==null&&f.$td_focus&&(f.$td_focus[0]==k[0])){f._editCell(k);return true}if(k.hasClass("pq-row-selector")){f._setSelection(h);return}if(k){f._setSelection(h,i,g)}}).dblclick(function(g){return true});this.$cont.bind("mousewheel DOMMouseScroll",function(h){var j=0;var h=h.originalEvent;if(h.wheelDelta){j=h.wheelDelta/120}else{if(h.detail){j=h.detail*-1/3}}var i=parseInt(f.$vscroll.pqScrollBar("option","cur_pos"));var g=i-j;if(g>=0){f.$vscroll.pqScrollBar("option","cur_pos",i-j).pqScrollBar("scroll")}return false});var c=0;b("<div class='pq-hvscroll-square'></div>").appendTo(this.$grid_inner);this.$vscroll=b("<div class='pq-vscroll'></div>").appendTo(this.$grid_inner);this.prevVScroll=0;this.$vscroll.pqScrollBar({pace:f.options.scrollPace,direction:"vertical",cur_pos:0,scroll:function(g,h){f.$cont[0].scrollTop=0;if(f.init!=h.cur_pos){b.measureTime(function(){f.selectCellRowCallback(f._generateTables)},"that.selectCellRowCallback(that._generateTables)");f._trigger("refresh",null,{dataModel:f.dataModel,data:f.data})}}});var e=0;this.$hscroll=b("<div class='pq-hscroll'></div>").appendTo(this.$grid_inner);this.$hscroll.pqScrollBar({direction:"horizontal",pace:f.options.scrollPace,cur_pos:0,scroll:function(g,h){f._bufferObj_calcInitFinalH();f._refreshHideArrHS();f.selectCellRowCallback(function(){f._createHeader();f._refreshHeaderSortIcons();f._generateTables()})}});this.element.width(this.options.width+"px").height(this.options.height+"px");this.disableSelection();if(b.browser.opera){this.$grid_inner.bind("keypress.pq-grid",{that:this},function(g){f.keyPressDown(g)})}else{this.$grid_inner.bind("keydown.pq-grid",{that:this},function(g){f.keyPressDown(g)})}this._refreshOptions();this._refreshTitle();var d=this.options.dataModel;if(typeof d.sortIndx=="number"&&d.sorting=="local"&&d.location=="local"){this._sortLocalData(d.sortIndx,d.sortDir,this.colModel[d.sortIndx].dataType)}this._initData();this._refresh()};a._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.data,colModel:this.options.colModel}};a._refreshOptions=function(){this._refreshDataOptions()};a._refreshDataOptions=function(){};a.enableSelection=function(){this.$grid_inner.enableSelection()};a.disableSelection=function(){this.$grid_inner.disableSelection()};a._isEditCell=function(d){var c=b(d.target);if(c.hasClass("pq-cell-selected-border-edit")||c.parents("div.pq-cell-selected-border-edit").length>0){return true}return false};a._initPager=function(){var c=this.options.dataModel;var d=this;var e={rPP:c.rPP,rPPOptions:c.rPPOptions,change:function(f,g){if(g.curPage!=undefined){c.prevPage=c.curPage;c.curPage=g.curPage}if(g.rPP!=undefined){c.rPP=g.rPP}if(c.paging=="remote"){d.remoteRequest()}else{d.$td_edit=null;d.$tr_focus=null;d.$td_focus=null;d._refreshDataFromDataModel();d._refresh()}},refresh:function(f){d.refreshDataAndView()}};if(c.paging){this.$footer.pqPager(e)}else{}};a._initData=function(){var d=this;var c=this.options.dataModel;if(c==undefined){throw ("dataModel not found.")}this._initPager();if(c.location=="remote"){var d=this;this.generateLoading();this.remoteRequest()}else{this._refreshDataFromDataModel()}};a._refreshHideArrHS=function(){var g=this;for(var d=0;d<g.colModel.length;d++){g.hidearrHS[d]=false}var c=this.options.columnOrder;if(g.initH>0){var f=g.freezeCols-1+g.initH;for(var d=g.freezeCols;d<=f;d++){var e=d;if(c!=null){e=c[d]}if(g.colModel[e].hidden){continue}g.hidearrHS[d]=true}}else{}};a.generateLoading=function(){var c=b("<div class='pq-loading'></div>").appendTo(this.element);b("<div class='pq-loading-bg'></div><div class='pq-mask'><div>Loading...</div></div>").appendTo(c);c.find("div.pq-loading-bg").css("opacity",0.2)};a.showLoading=function(){this.element.find("div.pq-loading").show()};a.hideLoading=function(){this.element.find("div.pq-loading").hide()};a._refreshDataFromDataModel=function(){var d=this.options.dataModel;if(d.data==null||d.data.length==0){if(d.paging){d.curPage=0;d.totalPages=0;d.totalRecords=0}return}if(d.paging&&d.paging=="local"){d.totalRecords=d.data.length;d.totalPages=Math.ceil(d.data.length/d.rPP);if(d.curPage>d.totalPages){d.curPage=d.totalPages}if(d.curPage<1&&d.totalPages>0){d.curPage=1}var e=(d.curPage-1)*d.rPP;var c=d.curPage*d.rPP;if(c>d.data.length){c=d.data.length}this.data=d.data.slice(e,c)}else{this.data=d.data}};a.remoteRequest=function(h){if(this.loading){this.xhr.abort()}var e=this;var d="";var g="";var c=this.options.dataModel;if(typeof c.getUrl=="function"){var f=c.getUrl();if(f&&f.url){d=f.url}if(f&&f.data){g=f.data}}if(!d){return}this.loading=true;this.showLoading();this.xhr=b.ajax({url:d,dataType:c.dataType,async:true,cache:false,type:c.method,data:g,beforeSend:function(j,i){if(typeof c.beforeSend=="function"){return c.beforeSend(j,i)}},success:function(i,m,k){var j=false;if(typeof c.getData=="function"){var l=c.getData(i,m,k);c.data=l.data;if(c.paging){if(c.paging=="remote"){if(l.curPage){c.curPage=l.curPage}if(l.totalRecords){c.totalRecords=l.totalRecords;c.totalPages=Math.ceil(c.totalRecords/c.rPP)}}}e._refreshDataFromDataModel();if(c.sorting=="local"&&c.sortIndx!=undefined){e._refreshSortingDataAndView(true)}else{e._refreshViewAfterDataSort()}}else{throw ("getData callback not found!")}e.hideLoading();e.loading=false;e._trigger("load",null,{dataModel:e.options.dataModel,data:e.data});if(typeof h=="function"){h()}},error:function(i,k,j){e.hideLoading();e.loading=false;if(typeof c.error=="function"){c.error(i,k,j)}}})};a.reorderColumns=function(c){var d=[1,0,2,3,4,5,6];var l=[];for(var g=0;g<this.data.length;g++){var k=this.data[g];var h=[];for(var f=0;f<this.colModel.length;f++){h.push(k[d[f]])}l.push(h)}var e=this.options.dataModel;e.data=l;this._refreshDataFromDataModel();this.refresh()};a._fixFireFoxContentEditableIssue=function(){if(!b.browser.msie){this.$grid_inner.focus()}};a.selectCellRowCallback=function(c){var e,f;if(this.$tr_focus){e=this.$tr_focus.attr("pq-row-indx")}else{if(this.$td_edit){e=this.$td_edit.parent("tr").attr("pq-row-indx");f=this.$td_edit.attr("pq-col-indx")}else{if(this.$td_focus){e=this.$td_focus.parent("tr").attr("pq-row-indx");f=this.$td_focus.attr("pq-col-indx")}}}var d=this;b.measureTime(function(){c.call(d)},"_generateTables");if(this.$tr_focus){this._boundRow(e)}else{if(this.$td_edit){this._boundCell(e,f)}else{if(this.$td_focus){this._boundCell(e,f)}}}};a._refreshTitle=function(){this.$title.html(this.options.title)};a._refreshDraggable=function(){if(this.options.draggable){this.$title.addClass("draggable");this.element.draggable({handle:this.$title,start:function(c,d){}})}else{this._destroyDraggable()}};a._refreshResizable=function(){var c=this;if(this.options.resizable){this.element.resizable({helper:"ui-state-highlight",delay:0,start:function(d,e){b(e.helper).css({opacity:0.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(d,e){},stop:function(d,e){c.options.height=c.element.height();c.options.width=c.element.width();c._refresh();c.element.css("position","relative")}})}else{this._destroyResizable()}};a.refresh=function(){this._refresh()};a._refresh=function(){var c=this;this._refreshResizable();this._refreshDraggable();this._bufferObj_calcInitFinalH();this._refreshHideArrHS();this._createHeader();this._refreshHeaderSortIcons();this._setInnerGridHeight();this._setRightGridHeight();this._setVScrollHeight();this.selectCellRowCallback(function(){c._generateTables();c._computeOuterWidths()});this._setHScrollWidth();this._refreshPager();this._trigger("refresh",null,{dataModel:this.dataModel,data:this.data})};a._refreshPager=function(){var c=this.options.dataModel;if(c.paging){this.$footer.pqPager("option",{currentPage:c.curPage,totalPages:c.totalPages,totalRecords:c.totalRecords,rPP:c.rPP,rPPOptions:c.rPPOptions})}};a._refreshViewAfterDataSort=function(){this.$td_focus=null;this.$tr_focus=null;this._setVScrollHeight();this._generateTables();this._computeOuterWidths();this._refreshHeaderSortIcons();this._setRightGridHeight();this._setVScrollHeight();this._setHScrollWidth();this._refreshPager()};a.refreshSortingDataAndView=function(){this._refreshSortingDataAndView(true)};a.refreshDataAndView=function(){this.data=null;this.$td_focus=null;this.$tr_focus=null;var c=this.options.dataModel;if(c.location=="remote"){c.data=null;this.remoteRequest()}else{this._refreshSortingDataAndView()}this._trigger("refresh",null,{dataModel:this.dataModel,data:this.data})};a._refreshSortingDataAndView=function(i,f){var e=this.options.dataModel;var h=e.sortIndx;if(h==undefined){}else{if(h>this.colModel.length-1){h=this.colModel.length-1;e.sortIndx=h}}var d=e.sortDir;var g=this;if(i==true){if(h==null){return}if(e.sorting=="remote"){this.remoteRequest(f)}else{var c=this.colModel[h].dataType;this._sortLocalData(h,d,c);this._refreshDataFromDataModel();g._refreshViewAfterDataSort();if(typeof f=="function"){f()}}}else{if(e.location=="remote"){this.remoteRequest(f)}else{if(this.data==null){this._refreshDataFromDataModel()}g._refreshViewAfterDataSort();if(typeof f=="function"){f()}}}};a._computeOuterWidths=function(){if(this.$tbl==null||this.data.length==0){for(var d=0;d<this.colModel.length;d++){this.outerWidths[d]=this.widths[d]}this.numberCell_outerWidth=this.numberCellWidth;return}var f=this.$tbl.find("tr:first");var g=this.$tbl.find("tr:first>td");var c=this.options.columnOrder;for(var d=0;d<this.colModel.length;d++){var e=d;if(c!=null){e=c[d]}var h=f.find("td[pq-col-indx="+e+"]");if(h.length>0){this.outerWidths[d]=parseInt(h[0].offsetWidth)}else{this.outerWidths[d]=null}}if(this.numberCell){this.numberCell_outerWidth=parseInt(g[0].offsetWidth)}};a._setOption=function(c,d){if(c=="height"){this.element.height(d+"px");b.Widget.prototype._setOption.call(this,c,d)}else{if(c=="width"){this.element.width(d+"px");b.Widget.prototype._setOption.call(this,c,d)}else{if(c=="title"){b.Widget.prototype._setOption.call(this,c,d);this._refreshTitle()}else{if(c=="freezeCols"){if(!isNaN(d)&&d>=0&&parseInt(d)<=this.colModel.length-2){this.freezeCols=parseInt(d);this._refreshFreezeLine();this._setHScrollWidth();b.Widget.prototype._setOption.call(this,c,d)}}else{if(c=="resizable"){b.Widget.prototype._setOption.call(this,c,d)}else{if(c=="scrollPace"){this.$hscroll.pqScrollBar("option",d);this.$vscroll.pqScrollBar("option",d);b.Widget.prototype._setOption.call(this,c,d)}else{if(c=="dataModel"){b.Widget.prototype._setOption.call(this,c,d);this._refreshSortingDataAndView()}else{b.Widget.prototype._setOption.call(this,c,d)}}}}}}}};a._setOptions=function(){b.Widget.prototype._setOptions.apply(this,arguments);this._refresh()};a._generateCellHighlighter=function(e,f,g,d,c){if(this.$div_focus&&this.$div_focus[0].offsetParent==e){if(this.$td_edit!=null){this._fixFireFoxContentEditableIssue();this.$div_focus.empty().removeClass("pq-cell-selected-border-edit");this.$td_edit=null}this.$div_focus.css({left:f,top:g,height:c,width:d})}else{if(this.$div_focus){this.$div_focus.remove()}this.$div_focus=b("<div class='pq-cell-selected-border'></div>").appendTo(e);this.$div_focus.css({left:f,top:g,height:c,width:d})}};a._selectRow=function(d,c){this.selectRow(d,c)};a._findfirstUnhiddenColIndx=function(){for(var c=0;c<this.colModel.length;c++){if(!this.colModel[c].hidden){return c}}};a._boundRow=function(e){var f=this._get$TR(e);if(f==null||f.length==0){return false}var d=this._calcRightEdgeCol(this.colModel.length-1);d-=4;var i=f[0].offsetHeight-4;var j=b(f[0].offsetParent);var c=j[0].offsetParent;var k=f[0].offsetLeft+j[0].offsetLeft;var h=f[0].offsetTop+j[0].offsetTop;var g=this;if(this.$td_focus){this.$td_focus.removeClass("pq-cell-select")}if(this.$tr_focus){this.$tr_focus.removeClass("pq-row-select")}this.$tr_focus=f;this.$tr_focus.addClass("pq-row-select");this.$td_focus=f.find("td[pq-col-indx="+this._findfirstUnhiddenColIndx()+"]");this._generateCellHighlighter(c,k,h,d,i)};a.selectRow=function(d,c){if(this._boundRow(d)==false){return false}this._trigger("rowSelect",c,{rowIndx:d,data:this.data});return true};a.scrollY=function(c){this.$vscroll.pqScrollBar("option","cur_pos",c).pqScrollBar("scroll")};a._bringRowIntoView=function(h){if(h<this._bufferObj_getInit()){this.$vscroll.pqScrollBar("option","cur_pos",h).pqScrollBar("scroll")}var g=this.$tbl.find("tr[pq-row-indx="+h+"]");if(g[0]==undefined){this.$vscroll.pqScrollBar("option","cur_pos",h).pqScrollBar("scroll")}else{var c=g[0].offsetTop+g[0].offsetHeight;if(c>this.$cont[0].offsetHeight-17){var i=c-(this.$cont[0].offsetHeight-17);var d=this.$tbl.children().children("tr");var e=0,f=0;d.each(function(j,k){e+=k.offsetHeight;if(e>=i){f=j;return false}});if(this.init+f+1>h){f=h-1-this.init}this.$vscroll.pqScrollBar("option","cur_pos",this.init+f+1).pqScrollBar("scroll")}}};a.setSelection=function(g,i){var d=this.options.dataModel;if(d.paging=="local"&&g>=0){var f=d.curPage;var h=d.rPP;var e=(f-1)*h;var c=f*h;g=parseInt(g);if(g>=e&&g<c){}else{d.curPage=Math.ceil((g+1)/h);this.refreshDataAndView()}g=(g%h)}return this._setSelection(g,i)};a._setSelection=function(j,g,o){if(j==null){if(this.$div_focus){this.$div_focus.remove();this.$div_focus=null;this.$td_focus=null;this.$tr_focus=null;this.$td_edit=null}return false}if(j<0||g<0){return false}if(this.data==null||this.data.length==0){return false}if(j>=this.data.length||g>=this.colModel.length){return false}this._bringRowIntoView(j);if(g==null){return this.selectRow(j,o)}if(this.hidearrHS[g]){this.hidearrHS[g]=false;var m=g-this.freezeCols-this._calcNumHiddenUnFrozens(g);this.$hscroll.pqScrollBar("option","cur_pos",m).pqScrollBar("scroll")}else{var d=this.$tbl.find("tr[pq-row-indx="+j+"]>td[pq-col-indx="+g+"]");if(d.length==0){return false}var h=this._calcRightEdgeCol(g);if(h>this.$cont[0].offsetWidth-17){var n=this._calcWidthCols(g)-(this.$cont[0].offsetWidth-17);var c=d.parent("tr").children("td");var e=this.colModel.length;var f=0,l=0;for(var k=this.freezeCols;k<e;k++){if(!this.colModel[k].hidden){f+=this.outerWidths[k]}if(k==g){l=k-this.freezeCols-this._calcNumHiddenUnFrozens(k);break}else{if(f>=n){l=k-this.freezeCols-this._calcNumHiddenUnFrozens(k)+1;break}}}this.$hscroll.pqScrollBar("option","cur_pos",l).pqScrollBar("scroll")}}return this.selectCell(j,g,o)};a.saveEditCell=function(){if(this.$td_edit==null){return}var c=this.$td_edit;var h=this._getRowColIndx(c);var f=h.rowIndx,d=h.colIndx;if(this.options.columnOrder!=null){d=this.options.columnOrder[d]}if(f!=null){var l=this.$div_focus;if(this.colModel[h.colIndx].saveCell){var k=this.colModel[d].saveCell({cell:l,data:this.data,rowIndx:f,colIndx:d});if(k!=undefined){this.data[f][d]=k}}else{var m=l.children().html();this.data[f][d]=m}var j=this._get$TR(f);for(var g=0;g<this.colModel.length;g++){var e=g;if(this.options.columnOrder!=null){e=this.options.columnOrder[g]}var c=j.find("td[pq-col-indx="+g+"]");if(c&&c.length>0){this._renderCell(f,e,c)}}}};a.quitEditMode=function(){if(this.$td_edit){this.disableSelection();this._boundCell(null,null,this.$td_edit);this._setGridFocus()}};a.getData=function(){return this.data};a.getViewPortRowsIndx=function(){this._bufferObj_calcInitFinal();return{beginIndx:this.init,endIndx:this["final"]}};a.getSelection=function(){function c(i){if(i==null){return null}var g=this.options.dataModel;var f=g.paging;if(f=="local"){var h=g.curPage;var j=g.rPP;i=parseInt(i);i+=(j*(h-1))}return i}if(this.$tr_focus){var d=this.$tr_focus.attr("pq-row-indx");d=c.call(this,d);return{rowIndx:parseInt(d),colIndx:null,data:this.data}}else{if(this.$td_focus){var d=this.$td_focus.parent("tr").attr("pq-row-indx");d=c.call(this,d);var e=this.$td_focus.attr("pq-col-indx");return{rowIndx:parseInt(d),colIndx:parseInt(e),data:this.data}}else{return{rowIndx:null,colIndx:null,data:this.data}}}};a._cellblurred=function(){this.$div_focus.remove();this.$div_focus=null;this.$td_focus=null;this.$tr_focus=null};a._boundCell=function(g,e,d){if(d==null){var d=this._get$TD(g,e)}if(d==null||d.length==0){return false}if(d.css("visibility")=="hidden"){return false}var j=b(d[0].offsetParent);var c=j[0].offsetParent;var f=d[0].offsetWidth-4;var i=d[0].offsetHeight-4;var k=d[0].offsetLeft+j[0].offsetLeft;var h=d[0].offsetTop+j[0].offsetTop;this._generateCellHighlighter(c,k,h,f,i);if(this.$tr_focus){this.$tr_focus.removeClass("pq-row-select")}if(this.$td_focus){this.$td_focus.removeClass("pq-cell-select")}this.$td_focus=d;this.$td_focus.addClass("pq-cell-select");this.$tr_focus=null};a.selectCell=function(d,e,c){if(this._boundCell(d,e)==false){return false}if(c!=null){this._setGridFocus()}this._trigger("cellSelect",c,{rowIndx:d,colIndx:e,data:this.data});return true};a._setGridFocus=function(){var c=this;window.setTimeout(function(){if(c.$td_edit==null){c.$grid_inner.focus()}},0)};a.editCell=function(c,d){var e=this._get$TD(c,d);if(e==null||this.$td_focus==null||this.$td_focus[0]!=e[0]){if(this._setSelection(c,d)==true){this._editCell(this.$td_focus)}}else{this._editCell(e)}};a._editCell=function(h){var d=this;var g=d._getRowColIndx(h);var c=g.rowIndx;var f=g.colIndx;if(this.options.columnOrder!=null){f=this.options.columnOrder[f]}if(this.options.editable==false||this.colModel[f].editable===false){return false}if(this.$td_edit&&this.$td_edit[0]==h[0]){return false}this.$td_edit=h;this.enableSelection();var e=this.$div_focus.addClass("pq-cell-selected-border-edit");if(this.colModel[f].align=="right"){e.css("text-align","right")}else{if(this.colModel[f].align=="center"){e.css("text-align","center")}else{e.css("text-align","left")}}if(this.colModel[f].editor){this.colModel[f].editor({cell:e,data:this.data,rowIndx:c,colIndx:f})}else{e.html("<div contenteditable='true' tabindx='0' style='background:#fff;padding:2px;'></div>");var d=this;e.children().html(d.data[c][f])}var d=this;window.setTimeout(function(){if(d.$td_edit!=null){e.children().focus()}},0)};a._get$TR=function(d){var c;if(this.$tbl!=undefined){c=this.$tbl.find("tr[pq-row-indx="+d+"]")}return c};a._get$TD=function(c,d){var e;if(this.$tbl!=undefined){e=this.$tbl.find("tr[pq-row-indx="+c+"]>td[pq-col-indx="+d+"]")}return e};a._getRowColIndx=function(f){if(f==null||f.length==0){return{rowIndx:null,colIndx:null}}var d=f.parent("tr");var g=d.parent("tbody");var c=parseInt(d.attr("pq-row-indx"));var e=parseInt(f.attr("pq-col-indx"));return{rowIndx:c,colIndx:e}};a.keyPressDown=function(k){var i=this;var j={left:37,up:38,right:39,down:40,tab:9,enter:13,pageDown:34,pageUp:33,esc:27,home:36,end:35};var g;var d;function e(){do{d++}while(i.colModel[d]&&i.colModel[d].hidden)}function f(){do{d--}while(i.colModel[d]&&i.colModel[d].hidden)}if(i.$td_edit){var c=b(i.$td_edit[0]);var h=i._getRowColIndx(i.$td_focus);g=h.rowIndx;d=h.colIndx;if(k.keyCode==j.tab){i.saveEditCell();i.quitEditMode();if(k.shiftKey){f();if(d<0){d=i.colModel.length-1;g--}}else{e();if(d>=i.colModel.length){g++;d=0}}i._setSelection(g,d,k);k.preventDefault();return false}else{if(k.keyCode==j.esc){i.quitEditMode()}}return}else{if(i.$td_focus){var h=i._getRowColIndx(i.$td_focus);g=h.rowIndx;d=h.colIndx;if(g==null||d==null){return}}else{return}}if(k.keyCode==j.left){f();i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.right){e();i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.tab){if(k.shiftKey){f();if(d<0){d=i.colModel.length-1;g--}}else{e();if(d>=i.colModel.length){g++;d=0}}i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.up){g=(g>0)?g-1:g;i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.down){g=(g<i.data.length-1)?(g+1):g;i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.pageDown){var g=i.init+10;if(g>i.data.length-1){g=i.data.length-1}i.$vscroll.pqScrollBar("option","cur_pos",g).pqScrollBar("scroll");var c=i.$tbl.find("tr[pq-row-indx="+g+"]>td[pq-col-indx="+d+"]");i.selectCell(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.pageUp){var g=i.init-10;if(g<0){g=0}i.$vscroll.pqScrollBar("option","cur_pos",g).pqScrollBar("scroll");var c=i.$tbl.find("tr[pq-row-indx="+g+"]>td[pq-col-indx="+d+"]");i.selectCell(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.home){g=0;i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.end){g=i.data.length-1;i._setSelection(g,d,k);k.preventDefault();return}else{if(k.keyCode==j.enter){if(i.$tr_focus!=null){i._boundCell(i.$td_focus)}i._editCell(i.$td_focus);k.preventDefault();return}else{}}}}}}}}}}};a._calcNumHiddenFrozens=function(){var c=0;for(var d=0;d<this.freezeCols;d++){if(this.colModel[d].hidden){c++}}return c};a._calcNumHiddenUnFrozens=function(f){var d=0;var c=(f)?f:this.colModel.length;for(var e=this.freezeCols;e<c;e++){if(this.colModel[e].hidden){d++}}return d};a._setHScrollWidth=function(){var e=this.$cont[0].offsetWidth;if(this.numberCell){e-=this.numberCell_outerWidth}var c=this.options.columnOrder;for(var d=0;d<this.freezeCols;d++){var g=d;if(c!=null){g=c[d]}e-=this.outerWidths[g]}var f=0;if(this.$vscroll.css("display")=="none"){this.$hscroll.css("right",0)}else{f=17;this.$hscroll.css("right","")}e-=f;this.$hscroll.pqScrollBar("option","length",e);var h=this.colModel.length-this.freezeCols-this._calcNumHiddenUnFrozens();this.$hscroll.pqScrollBar("option","num_eles",(h))};a._setVScrollHeight=function(){var c=this.$cont.height();this.$vscroll.pqScrollBar("option","length",(c-17));var d=(this.data)?this.data.length:0;if(d>=0){this.$vscroll.pqScrollBar("option","num_eles",(d))}};a._setInnerGridHeight=function(){var c=(this.element.outerHeight()-this.$top.outerHeight()-this.$bottom.outerHeight());this.$grid_inner.height(c+"px")};a._setRightGridHeight=function(){var c=(this.element.outerHeight()-this.$header_o.outerHeight()-this.$top.outerHeight()-this.$bottom.outerHeight());this.$cont.height(c+"px")};a._setRightGridWidth=function(){};a._bufferObj_getInit=function(){return this.init};a._bufferObj_getFinal=function(){return this["final"]};a._bufferObj_minRowsPerGrid=function(){var c=this.$cont[0].offsetHeight;return Math.ceil(c/this.rowHeight)};a._bufferObj_calcInitFinal=function(){if(this.data==null||this.data.length==0){this["final"]=this["init"]=null}else{var c=parseInt(this.$vscroll.pqScrollBar("option","cur_pos"));this.init=c;this["final"]=this.init+this._bufferObj_minRowsPerGrid();if(this["final"]+1>this.data.length){this["final"]=this.data.length-1}}};a._bufferObj_calcInitFinalH=function(){var c=parseInt(this.$hscroll.pqScrollBar("option","cur_pos"));var f=0;var e=0;for(var d=this.freezeCols;d<this.colModel.length;d++){if(this.colModel[d].hidden){f++}else{if(e==c){break}else{f++;e++}}}this.initH=f};a._calcWidthCols=function(e){var d=0;if(this.numberCell){d+=this.numberCell_outerWidth}for(var c=0;c<=e;c++){if(!this.colModel[c].hidden){d+=this.outerWidths[c]}}return d};a._calcRightEdgeCol=function(e){var d=0;if(this.numberCell){d+=this.numberCell_outerWidth}for(var c=0;c<=e;c++){if(!this.colModel[c].hidden&&this.hidearrHS[c]==false){d+=this.outerWidths[c]}}return d};a._refreshFreezeLine=function(){return;if(this.$freezeLine){this.$freezeLine.remove()}this.$freezeLine=b("<div style='position:absolute;width:1px;z-index:100;'></div>").appendTo(this.$grid_inner);var c=this.$grid_inner.outerHeight();var e=b("td[pq-grid-col-indx="+this.freezeCols+"]",this.$header)[0];var d=this._calcWidthCols(this.freezeCols-1)-1;this.$freezeLine.height(c).css({backgroundColor:"blue",top:"0",left:d})};a._getDragHelper=function(d){var c=b(d.currentTarget);this.$cl=b("<div style='position:absolute;width:1px;z-index:100;'></div>").appendTo(this.$grid_inner);this.$clleft=b("<div style='position:absolute;width:1px;z-index:100'></div>").appendTo(this.$grid_inner);var f=parseInt(c.attr("pq-grid-col-indx"));var e=this.$grid_inner.outerHeight();this.$cl.height(e);this.$clleft.height(e);var h=b("td[pq-grid-col-indx="+f+"]",this.$header)[0];var g=h.offsetLeft;this.$clleft.css({backgroundColor:"#000",top:"0",left:g});g=g+h.offsetWidth;this.$cl.css({backgroundColor:"#000",top:"0",left:g})};a._setDragLimits=function(i){var h=this;var c=h.$header;var g=c.find("div.pq-grid-col-resize-handle[pq-grid-col-indx="+i+"]");var d=c.find("td.pq-grid-col[pq-grid-col-indx="+i+"]");var f=d.offset().left+h.minWidth;var e=h.$cont.offset().left+h.$cont[0].offsetWidth-17;g.draggable("option","containment",[f,0,e,0])};a._getOrderIndx=function(d){var c=this.options.columnOrder;if(c!=null){return c[d]}else{return d}};a._createHeader=function(){var k=this;var p="<table class='pq-grid-header-table' cellpadding=0 cellspacing=0><tr>";if(this.numberCell){p+="<td style='width:"+this.numberCellWidth+"px;'>		<div class='pq-grid-header-table-div'>&nbsp;</div></td>"}var o=[];var j=this.options.columnOrder;for(var r=0;r<this.colModel.length;r++){var q=r;if(j!=null){q=j[r]}var m=this.colModel[q];if(m.hidden){continue}else{if(k.hidearrHS[r]){o.push(r);continue}}var e="pq-grid-col";if(m.align=="right"){e+=" pq-align-right"}else{if(m.align=="center"){e+=" pq-align-center"}}if(r==k.freezeCols-1){e+=" pq-last-freeze-col"}var l=k.widths[q];if(k.columnBorders==false){l-=1}var u="width:"+l+"px;";p+="<td style='"+u+"' pq-grid-col-indx='"+r+"' class='"+e+"'>		<div class='pq-grid-header-table-div'>"+m.title+"<span class='pq-col-sort-icon'>&nbsp;</span></div></td>"}b.each(o,function(x,A){var z=k.colModel[A];var w="pq-grid-col";if(z.align=="right"){w+=" pq-align-right"}else{if(z.align=="center"){w+=" pq-align-center"}}var y="width:"+k.widths[A]+"px;visibility:hidden;";p+="<td style='"+y+"' pq-grid-col-indx='"+A+"' class='"+w+"'>		<div class='pq-grid-header-table-div'>"+z.title+"<span class='pq-col-sort-icon'>&nbsp;</span></div></td>"});p+="</tr></table>";this.$header.empty();this.$header.append(p);this.$header.find("td").click(function(){if(!k.options.sortable){return}var x=b(this).attr("pq-grid-col-indx");if(j!=null){x=j[x]}if(k._trigger("beforeSort",null,{dataModel:k.dataModel,data:k.data,sortIndx:x})==false){return}var w="up";var i=k.options.dataModel;if(i.sortIndx==x){w=(i.sortDir=="up")?"down":"up"}i.sortIndx=x;i.sortDir=w;k._refreshSortingDataAndView(true,function(){k._trigger("sort",null,{dataModel:k.dataModel,data:k.data})})});var t=k.$header.find(".pq-grid-col");var v=0;var n=k.$header[0].offsetHeight;for(var r=0;r<this.colModel.length;r++){var q=r;if(j!=null){q=j[r]}var m=k.colModel[q];if(k.hidearrHS[r]){continue}else{if(m.hidden){continue}}if(m.resizable!=undefined&&m.resizable==false){continue}var d=b("<div pq-grid-col-indx='"+r+"' class='pq-grid-col-resize-handle'>&nbsp;</div>").appendTo(k.$header);var s=k.$header.find("td[pq-grid-col-indx="+r+"]")[0];v=s.offsetLeft+s.offsetWidth-10;d.css({left:v,height:n})}var g,h,f;var c=k.$header.find(".pq-grid-col-resize-handle").draggable({axis:"x",helper:function(w,y){var i=b(w.target);var x=parseInt(i.attr("pq-grid-col-indx"));k._setDragLimits(x);k._getDragHelper(w,y);return i},start:function(i,w){g=w.position.left;f=parseInt(k.$cl[0].style.left)},drag:function(i,x){h=x.position.left;var w=(h-g);k.$cl[0].style.left=f+w+"px"},stop:function(x,B){k.$clleft.remove();k.$cl.remove();h=B.position.left;var z=(h-g);var w=b(B.helper);var A=parseInt(w.attr("pq-grid-col-indx"));var y=k.options.columnOrder;if(y!=null){A=y[A]}var i=k.widths[A];k.widths[A]=k.widths[A]+z;k._refresh()}});c.each(function(w,x){})};a._refreshHeaderSortIcons=function(){if(this.options.dataModel.sortIndx==undefined){return}var d=this.$header.find(".pq-grid-col");d.removeClass("pq-col-sort-asc pq-col-sort-desc");var c=this.options.dataModel;var e=c.sortIndx;e=this._getOrderIndx(e);this.$header.find(".pq-grid-col[pq-grid-col-indx="+e+"]").addClass("pq-col-sort-"+(c.sortDir=="up"?"asc":"desc"))};a._generateTables=function(){var n=this.colModel.length;var q=0;this._bufferObj_calcInitFinal();var u=this.init,d=this["final"];if(u==null||d==null){this.$cont.empty();this.$tbl=null;return}this._trigger("beforeTableView",null,{data:this.data,curPos:u,finalPos:d,curPage:this.dataModel.curPage});var s="";if(this.columnBorders){s="pq-grid-td-border-right "}if(this.options.wrap==false){s+="pq-wrap-text "}var h=["<table style='table-layout:fixed;width:0px;position:absolute;top:0px;' cellpadding=0 cellspacing=0>"];var e=this.options.columnOrder;for(var m=u;m<=d;m++){var p="pq-grid-row";if(m/2==parseInt(m/2)){p+=" pq-grid-oddRow"}var l="<tr pq-row-indx='"+m+"' class='"+p+"'>";h.push(l);if(this.numberCell){h.push("<td style='width:"+this.numberCellWidth+"px;' class='pq-grid-number-cell pq-row-selector'>			<div class='pq-td-div'>"+(m+1)+"</div></td>")}var r=[];for(var g=0;g<n;g++){var v=g;if(e!=null){v=e[g]}if(this.colModel[v].hidden){continue}else{if(this.hidearrHS[g]){r.push(g);continue}}var c="";if(m==u){c="width:"+this.widths[v]+"px;"}var t=s;if(this.colModel[v].align=="right"){t+=" pq-align-right"}else{if(this.colModel[v].align=="center"){t+=" pq-align-center"}}if(g==this.freezeCols-1){t+=" pq-last-freeze-col"}var o="<td class='"+t+"' style='"+c+"' pq-col-indx='"+g+"'>				"+this._renderCell(m,v)+"</td>";h.push(o)}for(var f=0;f<r.length;f++){var g=r[f];var v=g;if(e!=null){v=e[g]}var c="";if(m==u){c="width:"+this.widths[v]+"px;"}c+="visibility:hidden;";var t=s;if(this.colModel[v].align=="right"){t+=" pq-align-right"}else{if(this.colModel[v].align=="center"){t+=" pq-align-center"}}var o="<td class='"+t+"' style='"+c+"' pq-col-indx='"+g+"'>				"+this._renderCell(m,v)+"</td>";h.push(o)}h.push("</tr>")}h.push("</table>");var o=h.join("");if(this.$tbl==undefined){this.$tbl=b(o);this.$cont.append(this.$tbl)}else{if(this.$td_edit!=null){this._fixFireFoxContentEditableIssue()}this.$cont.empty();this.$td_edit=null;this.$tbl=b(o);this.$cont.append(this.$tbl)}};a._renderCell=function(d,f,h){var e;if(this.colModel[f].render){e=this.colModel[f].render({data:this.data,rowIndx:d,colIndx:f})}else{var e=this.data[d][f]}if(e==""||e==undefined){e="&nbsp;"}var c="pq-td-div";if(this.options.wrap==false){c+=" pq-wrap-text"}var g="<div class='"+c+"'>"+e+"</div>";if(h!=undefined){h.html(g)}return g};a._sortLocalData=function(g,f,e){var i=g;var d=f;var h=this.options.dataModel.data;if(h==null||h.length==0){return}function c(){function n(r,q){var p=r[g];var o=q[g];p=p?parseInt(p):0;o=o?parseInt(o):0;return(p-o)}function j(r,q){var p=r[g];var o=q[g];return e(p,o)}function m(r,q){var p=r[g].replace(/,/g,"");var o=q[g].replace(/,/g,"");p=p?parseFloat(p):0;o=o?parseFloat(o):0;return(p-o)}var k=0;function l(r,q){k++;var p=r[g];var o=q[g];p=p?p:"";o=o?o:"";if(p>o){return 1}else{if(p<o){return -1}}return 0}if(e=="integer"){h=h.sort(n)}else{if(e=="float"){h=h.sort(m)}else{if(typeof e=="function"){h=h.sort(j)}else{h=h.sort(l)}}}if(d=="down"){h=h.reverse()}}b.measureTime(c,"innerSort")};b.widget("paramquery.pqGrid",a);b.measureTime=function(g,f){var d=(new Date()).getTime();g();var c=(new Date()).getTime();var e=c-d}})(jQuery);var cons={log:function(d){try{if($.browser.msie&&typeof d=="object"){throw""}console.log(d)}catch(c){var a="";if(typeof d=="object"){for(var b in d){if(typeof d[b]!="function"){a+=b+" = "+d[b]}}}else{if(document.getElementById("console")==undefined){$("<textarea id='console' rows=8 cols=100>"+d+"</textarea>").appendTo(document.body)}var f=$("#console");f.text(f.text()+"\r\n"+d);f[0].scrollTop=10000000000000}}}};